<?xml version="1.0" encoding="UTF-8"?>

<?import java.lang.String?>
<?import javafx.collections.FXCollections?>
<?import javafx.geometry.Insets?>
<?import javafx.scene.control.Button?>
<?import javafx.scene.control.ComboBox?>
<?import javafx.scene.control.Label?>
<?import javafx.scene.control.ScrollPane?>
<?import javafx.scene.control.TextField?>
<?import javafx.scene.control.ToggleButton?>
<?import javafx.scene.control.Tooltip?>
<?import javafx.scene.layout.BorderPane?>
<?import javafx.scene.layout.ColumnConstraints?>
<?import javafx.scene.layout.GridPane?>
<?import javafx.scene.layout.HBox?>
<?import javafx.scene.layout.Pane?>
<?import javafx.scene.layout.RowConstraints?>
<?import javafx.scene.layout.StackPane?>
<?import javafx.scene.layout.VBox?>
<?import javafx.scene.shape.Circle?>
<?import javafx.scene.text.Font?>

<BorderPane minHeight="600.0" minWidth="750.0" styleClass="root" xmlns="http://javafx.com/javafx/21" xmlns:fx="http://javafx.com/fxml/1" fx:controller="com.larrykin.snaptap.controllers.MainController">
    <!-- Top: Title, Profile selector, Add profile -->
    <top>
        <VBox>
            <!-- First row: App icon and window controls -->
            <HBox fx:id="windowBar" alignment="CENTER_LEFT" spacing="15" styleClass="window-bar">
                <!-- Logo and title added programmatically -->
                <Pane HBox.hgrow="ALWAYS"/>
                <!-- Window controls added in Main.java -->
            </HBox>

            <!-- Second row: Navigation controls -->
            <HBox alignment="CENTER" spacing="10" styleClass="title-bar">
                <Label styleClass="app-title" text="SnapTap"/>
                <Pane HBox.hgrow="ALWAYS"/>
                <ComboBox fx:id="profileCombo" minHeight="47.0" minWidth="187.0" prefHeight="47.0" prefWidth="187.0" promptText="Select Profile"/>
                <Button fx:id="addProfileBtn" minHeight="46.0" minWidth="46.0" prefHeight="46.0" prefWidth="46.0" text="+">
                    <tooltip>
                        <Tooltip text="Add Profile"/>
                    </tooltip>
                </Button>
            </HBox>
        </VBox>
    </top>

    <!-- Left: System Status Panel -->
    <left>
        <VBox fx:id="statusBox" minWidth="300.0" spacing="10" styleClass="status-panel">
            <VBox alignment="CENTER" minHeight="250.0" minWidth="150.0" spacing="20.0" styleClass="card">
                <children>
                    <HBox>
                        <children>
                            <Label minWidth="150.0" styleClass="status-panel-title" text="System Status"/>
                            <Pane/>
                        </children>
                    </HBox>
                    <HBox alignment="CENTER_LEFT">
                        <Label styleClass="status-label" text="Run in background">
                            <font>
                                <Font size="11.0"/>
                            </font>
                        </Label>
                        <Pane prefHeight="25.0" prefWidth="98.0"/>
                        <ToggleButton fx:id="runToggle" prefHeight="25.0" prefWidth="58.0">
                            <graphic>
                                <Circle fx:id="toggleCircle" radius="11.0" stroke="BLACK" strokeType="INSIDE"/>
                            </graphic>
                        </ToggleButton>
                    </HBox>

                    <GridPane hgap="5" styleClass="gridpane" vgap="5">
                        <Label styleClass="status-label" text="Status:" GridPane.columnIndex="0" GridPane.rowIndex="0"/>

                        <Label styleClass="status-label" text="Uptime:" GridPane.columnIndex="0" GridPane.rowIndex="1"/>
                        <Label fx:id="uptimeLabel" styleClass="status-label" text="00:00:00" GridPane.columnIndex="1" GridPane.rowIndex="1"/>

                        <Label styleClass="status-label" text="Active hotkeys:" GridPane.columnIndex="0" GridPane.rowIndex="2"/>
                        <Label fx:id="activeHotkeysLabel" styleClass="status-label" text="0/0" GridPane.columnIndex="1" GridPane.rowIndex="2"/>
                        <Button fx:id="statusButton" mnemonicParsing="false" text="Running" GridPane.columnIndex="1">
                            <padding>
                                <Insets bottom="5.0" left="15.0" right="15.0" top="5.0"/>
                            </padding>
                        </Button>
                        <columnConstraints>
                            <ColumnConstraints maxWidth="142.0" minWidth="63.0" prefWidth="123.0"/>
                            <ColumnConstraints halignment="RIGHT" hgrow="ALWAYS" maxWidth="1.7976931348623157E308" minWidth="30.0" prefWidth="121.0"/>
                        </columnConstraints>
                        <rowConstraints>
                            <RowConstraints/>
                            <RowConstraints/>
                            <RowConstraints/>
                        </rowConstraints>
                    </GridPane>

                    <Button fx:id="stopServiceBtn" prefHeight="26.0" prefWidth="120.0" styleClass="stop-button" text="Stop Service">
                        <font>
                            <Font size="18.0"/>
                        </font>
                        <padding>
                            <Insets bottom="7.0" left="10.0" right="10.0" top="7.0"/>
                        </padding>
                    </Button>
                    <Label styleClass="status-hint" text="Try: Ctrl+G"/>
                </children>
                <padding>
                    <Insets bottom="30.0" left="20.0" right="20.0" top="30.0"/>
                </padding>
            </VBox>
            <padding>
                <Insets left="30.0" right="30.0"/>
            </padding>
        </VBox>
    </left>

    <!-- Center: TabPane with Dashboard, Keyboard Map, Add Hotkey -->
    <center>
        <VBox spacing="20.0" styleClass="center-container">
            <!-- Custom tab bar -->
            <HBox fx:id="tabBar" alignment="CENTER_LEFT" spacing="0" styleClass="custom-tab-bar">
                <Button fx:id="dashboardTab" alignment="CENTER" maxHeight="1.7976931348623157E308" maxWidth="1.7976931348623157E308" onAction="#switchTab" styleClass="tab-button, selected-tab" text="Dashboard" textAlignment="CENTER"
                        HBox.hgrow="ALWAYS"/>
                <Button fx:id="keyboardMapTab" alignment="CENTER" maxHeight="1.7976931348623157E308" maxWidth="1.7976931348623157E308" onAction="#switchTab" styleClass="tab-button" text="Keyboard Map" textAlignment="CENTER" HBox.hgrow="ALWAYS"/>
                <Button fx:id="addHotkeyTab" alignment="CENTER" maxHeight="1.7976931348623157E308" maxWidth="1.7976931348623157E308" onAction="#switchTab" styleClass="tab-button" text="Add Hotkey" textAlignment="CENTER" HBox.hgrow="ALWAYS"/>
            </HBox>

            <!-- Content area with margin -->
            <StackPane fx:id="contentArea" styleClass="content-area" VBox.vgrow="ALWAYS">
                <!-- Dashboard Content -->
                <VBox fx:id="dashboardContent" spacing="10" styleClass="content-pane">
                    <TextField fx:id="searchField" minHeight="40.0" promptText="Search for hotkeys..."/>
                    <ScrollPane fitToWidth="true" VBox.vgrow="ALWAYS" styleClass="scroll-pane">
                        <VBox fx:id="hotkeyCardContainer" spacing="10" styleClass="v-box"/>
                    </ScrollPane>
                </VBox>

                <!-- Keyboard Map Content -->
                <ScrollPane fx:id="keyboardMapContent" fitToHeight="true" fitToWidth="true" visible="false">
                    <GridPane fx:id="keyboardGrid1" hgap="5" styleClass="shared-gridPane" vgap="5">
                        <!-- Keys populated dynamically -->
                    </GridPane>
                </ScrollPane>

                <!-- Add Hotkey Content -->
                <VBox fx:id="addHotkeyContent" spacing="15" styleClass="shared-gridPane" visible="false">
                    <!-- Hotkey Name -->
                    <VBox spacing="5">
                        <Label text="Hotkey Name"/>
                        <TextField fx:id="nameField" promptText="e.g., Open Google"/>
                    </VBox>

                    <!-- Modifier Keys -->
                    <VBox spacing="5">
                        <Label text="Modifier Keys"/>
                        <HBox spacing="10">
                            <ToggleButton text="Ctrl"/>
                            <ToggleButton text="Alt"/>
                            <ToggleButton text="Shift"/>
                            <ToggleButton text="Win"/>
                        </HBox>
                    </VBox>

                    <!-- Key Selection -->
                    <VBox spacing="5">
                        <Label text="Key:"/>
                        <ScrollPane fitToWidth="true" style="-fx-background-color: transparent;">
                            <GridPane fx:id="keyboardGrid" hgap="5" vgap="5" alignment="CENTER">
                                <!-- Function keys row -->
                                <HBox spacing="3" alignment="CENTER" GridPane.rowIndex="0" GridPane.columnIndex="0" GridPane.columnSpan="12">
                                    <ToggleButton styleClass="keyboard-key" text="F1" prefWidth="45" prefHeight="40"/>
                                    <ToggleButton styleClass="keyboard-key" text="F2" prefWidth="45" prefHeight="40"/>
                                    <ToggleButton styleClass="keyboard-key" text="F3" prefWidth="45" prefHeight="40"/>
                                    <ToggleButton styleClass="keyboard-key" text="F4" prefWidth="45" prefHeight="40"/>
                                    <ToggleButton styleClass="keyboard-key" text="F5" prefWidth="45" prefHeight="40"/>
                                    <ToggleButton styleClass="keyboard-key" text="F6" prefWidth="45" prefHeight="40"/>
                                    <ToggleButton styleClass="keyboard-key" text="F7" prefWidth="45" prefHeight="40"/>
                                    <ToggleButton styleClass="keyboard-key" text="F8" prefWidth="45" prefHeight="40"/>
                                    <ToggleButton styleClass="keyboard-key" text="F9" prefWidth="45" prefHeight="40"/>
                                    <ToggleButton styleClass="keyboard-key" text="F10" prefWidth="45" prefHeight="40"/>
                                    <ToggleButton styleClass="keyboard-key" text="F11" prefWidth="45" prefHeight="40"/>
                                    <ToggleButton styleClass="keyboard-key" text="F12" prefWidth="45" prefHeight="40"/>
                                </HBox>

                                <!-- Number row -->
                                <HBox spacing="3" alignment="CENTER" GridPane.rowIndex="1" GridPane.columnIndex="0" GridPane.columnSpan="12">
                                    <ToggleButton styleClass="keyboard-key" text="1" prefWidth="45" prefHeight="40"/>
                                    <ToggleButton styleClass="keyboard-key" text="2" prefWidth="45" prefHeight="40"/>
                                    <ToggleButton styleClass="keyboard-key" text="3" prefWidth="45" prefHeight="40"/>
                                    <ToggleButton styleClass="keyboard-key" text="4" prefWidth="45" prefHeight="40"/>
                                    <ToggleButton styleClass="keyboard-key" text="5" prefWidth="45" prefHeight="40"/>
                                    <ToggleButton styleClass="keyboard-key" text="6" prefWidth="45" prefHeight="40"/>
                                    <ToggleButton styleClass="keyboard-key" text="7" prefWidth="45" prefHeight="40"/>
                                    <ToggleButton styleClass="keyboard-key" text="8" prefWidth="45" prefHeight="40"/>
                                    <ToggleButton styleClass="keyboard-key" text="9" prefWidth="45" prefHeight="40"/>
                                    <ToggleButton styleClass="keyboard-key" text="0" prefWidth="45" prefHeight="40"/>
                                </HBox>

                                <!-- QWERTY row -->
                                <HBox spacing="3" alignment="CENTER" GridPane.rowIndex="2" GridPane.columnIndex="0" GridPane.columnSpan="12">
                                    <ToggleButton styleClass="keyboard-key" text="Q" prefWidth="45" prefHeight="40"/>
                                    <ToggleButton styleClass="keyboard-key" text="W" prefWidth="45" prefHeight="40"/>
                                    <ToggleButton styleClass="keyboard-key" text="E" prefWidth="45" prefHeight="40"/>
                                    <ToggleButton styleClass="keyboard-key" text="R" prefWidth="45" prefHeight="40"/>
                                    <ToggleButton styleClass="keyboard-key" text="T" prefWidth="45" prefHeight="40"/>
                                    <ToggleButton styleClass="keyboard-key" text="Y" prefWidth="45" prefHeight="40"/>
                                    <ToggleButton styleClass="keyboard-key" text="U" prefWidth="45" prefHeight="40"/>
                                    <ToggleButton styleClass="keyboard-key" text="I" prefWidth="45" prefHeight="40"/>
                                    <ToggleButton styleClass="keyboard-key" text="O" prefWidth="45" prefHeight="40"/>
                                    <ToggleButton styleClass="keyboard-key" text="P" prefWidth="45" prefHeight="40"/>
                                </HBox>

                                <!-- ASDF row -->
                                <HBox spacing="3" alignment="CENTER" GridPane.rowIndex="3" GridPane.columnIndex="0" GridPane.columnSpan="12">
                                    <ToggleButton styleClass="keyboard-key" text="A" prefWidth="45" prefHeight="40"/>
                                    <ToggleButton styleClass="keyboard-key" text="S" prefWidth="45" prefHeight="40"/>
                                    <ToggleButton styleClass="keyboard-key" text="D" prefWidth="45" prefHeight="40"/>
                                    <ToggleButton styleClass="keyboard-key" text="F" prefWidth="45" prefHeight="40"/>
                                    <ToggleButton styleClass="keyboard-key" text="G" prefWidth="45" prefHeight="40"/>
                                    <ToggleButton styleClass="keyboard-key" text="H" prefWidth="45" prefHeight="40"/>
                                    <ToggleButton styleClass="keyboard-key" text="J" prefWidth="45" prefHeight="40"/>
                                    <ToggleButton styleClass="keyboard-key" text="K" prefWidth="45" prefHeight="40"/>
                                    <ToggleButton styleClass="keyboard-key" text="L" prefWidth="45" prefHeight="40"/>
                                </HBox>

                                <!-- ZXCV row -->
                                <HBox spacing="3" alignment="CENTER" GridPane.rowIndex="4" GridPane.columnIndex="0" GridPane.columnSpan="12">
                                    <ToggleButton styleClass="keyboard-key" text="Z" prefWidth="45" prefHeight="40"/>
                                    <ToggleButton styleClass="keyboard-key" text="X" prefWidth="45" prefHeight="40"/>
                                    <ToggleButton styleClass="keyboard-key" text="C" prefWidth="45" prefHeight="40"/>
                                    <ToggleButton styleClass="keyboard-key" text="V" prefWidth="45" prefHeight="40"/>
                                    <ToggleButton styleClass="keyboard-key" text="B" prefWidth="45" prefHeight="40"/>
                                    <ToggleButton styleClass="keyboard-key" text="N" prefWidth="45" prefHeight="40"/>
                                    <ToggleButton styleClass="keyboard-key" text="M" prefWidth="45" prefHeight="40"/>
                                </HBox>

                                <!-- Hidden ComboBox to maintain compatibility with existing code -->
                                <ComboBox fx:id="keyCombo" visible="false" prefWidth="300" GridPane.rowIndex="5"/>
                            </GridPane>
                        </ScrollPane>
                    </VBox>

                    <!-- Action Type -->
                    <VBox spacing="5">
                        <Label text="Action Type"/>
                        <ComboBox fx:id="actionTypeCombo" prefWidth="300">
                            <items>
                                <FXCollections fx:factory="observableArrayList">
                                    <String fx:value="Website"/>
                                    <String fx:value="Application"/>
                                    <String fx:value="File or Folder"/>
                                </FXCollections>
                            </items>
                        </ComboBox>
                    </VBox>

                    <!-- Action -->
                    <VBox spacing="5">
                        <Label text="Action"/>
                        <TextField fx:id="actionField" promptText="/path/to/file/or/folder"/>
                    </VBox>

                    <HBox alignment="CENTER">
                        <Label text="Hotkey: Ctrl+Alt+Shift+Win+X" style="-fx-text-fill: #00ffcc;"/>
                        <Pane HBox.hgrow="ALWAYS"/>
                        <Button fx:id="saveHotkeyBtn" text="Add Hotkey"/>
                    </HBox>
                </VBox>
            </StackPane>
        </VBox>
    </center>
</BorderPane>
