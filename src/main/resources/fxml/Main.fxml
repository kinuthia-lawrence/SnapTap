<?xml version="1.0" encoding="UTF-8"?>
<?import javafx.collections.FXCollections?>
<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>
<?import java.lang.String?>
<BorderPane xmlns:fx="http://javafx.com/fxml" fx:controller="com.larrykin.snaptap.controllers.MainController" styleClass="root">
    <!-- Top: Title, Profile selector, Add profile -->
    <top>
        <VBox spacing="5">
            <!-- First row: App icon and window controls -->
            <HBox fx:id="windowBar" spacing="15" alignment="CENTER_LEFT" styleClass="window-bar">
                <!-- Logo and title added programmatically -->
                <Pane HBox.hgrow="ALWAYS"/>
                <!-- Window controls added in Main.java -->
            </HBox>

            <!-- Second row: Navigation controls -->
            <HBox spacing="10" alignment="CENTER_LEFT" styleClass="title-bar">
                <Label text="SnapTap" styleClass="app-title"/>
                <Pane HBox.hgrow="ALWAYS"/>
                <ComboBox fx:id="profileCombo" promptText="Select Profile" prefWidth="150"/>
                <Button fx:id="addProfileBtn" text="+">
                    <tooltip>
                        <Tooltip text="Add Profile"/>
                    </tooltip>
                </Button>
            </HBox>
        </VBox>
    </top>

    <!-- Left: System Status Panel -->
    <left>
        <VBox fx:id="statusBox" spacing="10" styleClass="status-panel" prefWidth="200">
            <Label text="System Status" styleClass="status-panel-title"/>
            <HBox spacing="5" alignment="CENTER_LEFT">
                <Label text="Run in background" styleClass="status-label"/>
                <ToggleButton fx:id="runToggle"/>
            </HBox>

            <GridPane hgap="5" vgap="5">
                <Label text="Status:" styleClass="status-label" GridPane.rowIndex="0" GridPane.columnIndex="0"/>
                <Label fx:id="statusLabel" text="Running" styleClass="status-active" GridPane.rowIndex="0" GridPane.columnIndex="1"/>

                <Label text="Uptime:" styleClass="status-label" GridPane.rowIndex="1" GridPane.columnIndex="0"/>
                <Label fx:id="uptimeLabel" text="00:00:00" styleClass="status-label" GridPane.rowIndex="1" GridPane.columnIndex="1"/>

                <Label text="Active hotkeys:" styleClass="status-label" GridPane.rowIndex="2" GridPane.columnIndex="0"/>
                <Label fx:id="activeHotkeysLabel" text="0/0" styleClass="status-label" GridPane.rowIndex="2" GridPane.columnIndex="1"/>
            </GridPane>

            <Button fx:id="stopServiceBtn" text="Stop Service" maxWidth="Infinity" styleClass="stop-button"/>
            <Label text="Try: Ctrl+G" styleClass="status-hint"/>
        </VBox>
    </left>

    <!-- Center: TabPane with Dashboard, Keyboard Map, Add Hotkey -->
    <center>
        <VBox spacing="10" styleClass="center-container">
            <!-- Custom tab bar -->
            <HBox fx:id="tabBar" spacing="0" alignment="CENTER_LEFT" styleClass="custom-tab-bar">
                <Button fx:id="dashboardTab" text="Dashboard" styleClass="tab-button, selected-tab" onAction="#switchTab"/>
                <Button fx:id="keyboardMapTab" text="Keyboard Map" styleClass="tab-button" onAction="#switchTab"/>
                <Button fx:id="addHotkeyTab" text="Add Hotkey" styleClass="tab-button" onAction="#switchTab"/>
            </HBox>

            <!-- Content area with margin -->
            <StackPane fx:id="contentArea" styleClass="content-area" VBox.vgrow="ALWAYS">
                <!-- Dashboard Content -->
                <VBox fx:id="dashboardContent" spacing="10" styleClass="content-pane">
                    <TextField fx:id="searchField" promptText="Search for hotkeys..."/>
                    <ScrollPane fitToWidth="true" VBox.vgrow="ALWAYS">
                        <VBox fx:id="hotkeyCardContainer" spacing="10"/>
                    </ScrollPane>
                </VBox>

                <!-- Keyboard Map Content -->
                <ScrollPane fx:id="keyboardMapContent" fitToWidth="true" fitToHeight="true" visible="false">
                    <GridPane fx:id="keyboardGrid" hgap="5" vgap="5" styleClass="content-pane">
                        <!-- Keys populated dynamically -->
                    </GridPane>
                </ScrollPane>

                <!-- Add Hotkey Content -->
                <GridPane fx:id="addHotkeyContent" hgap="10" vgap="10" styleClass="content-pane" visible="false">
                    <Label text="Name:" GridPane.rowIndex="0" GridPane.columnIndex="0"/>
                    <TextField fx:id="nameField" GridPane.rowIndex="0" GridPane.columnIndex="1"/>

                    <Label text="Modifiers:" GridPane.rowIndex="1" GridPane.columnIndex="0"/>
                    <TextField fx:id="modifierField" promptText="e.g. CTRL+ALT+W" GridPane.rowIndex="1" GridPane.columnIndex="1"/>

                    <Label text="Key:" GridPane.rowIndex="2" GridPane.columnIndex="0"/>
                    <ComboBox fx:id="keyCombo" GridPane.rowIndex="2" GridPane.columnIndex="1" prefWidth="150">
                        <items>
                            <FXCollections fx:factory="observableArrayList">
                                <!-- A-Z, 0-9, F1-F12 -->
                            </FXCollections>
                        </items>
                    </ComboBox>

                    <Label text="Action Type:" GridPane.rowIndex="3" GridPane.columnIndex="0"/>
                    <ComboBox fx:id="actionTypeCombo" GridPane.rowIndex="3" GridPane.columnIndex="1">
                        <items>
                            <FXCollections fx:factory="observableArrayList">
                                <String fx:value="Website"/>
                                <String fx:value="Application"/>
                                <String fx:value="File/Folder"/>
                            </FXCollections>
                        </items>
                    </ComboBox>

                    <Label text="Action:" GridPane.rowIndex="4" GridPane.columnIndex="0"/>
                    <TextField fx:id="actionField" GridPane.rowIndex="4" GridPane.columnIndex="1" promptText="URL, path, or application name"/>

                    <Button fx:id="saveHotkeyBtn" text="Save" GridPane.rowIndex="5" GridPane.columnIndex="1"/>
                </GridPane>
            </StackPane>
        </VBox>
    </center>
</BorderPane>